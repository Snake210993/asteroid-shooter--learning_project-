[gd_scene load_steps=13 format=3 uid="uid://327vdnnkmu8k"]

[ext_resource type="Script" uid="uid://bfpv4lkyvmn6r" path="res://core/scenes/objects/script/player_ship.gd" id="1_glpa6"]
[ext_resource type="Texture2D" uid="uid://32y2xjtb346b" path="res://core/resources/textures/asteroid_shooter_ship.tres" id="1_qhiiv"]
[ext_resource type="PackedScene" uid="uid://d12dcf3qc13ai" path="res://_reusable/components/health.tscn" id="3_4n1ev"]
[ext_resource type="PackedScene" uid="uid://mun431b1178s" path="res://_reusable/components/screen_wrap.tscn" id="4_xcgsg"]
[ext_resource type="Texture2D" uid="uid://dsx1hq0t77j64" path="res://core/resources/textures/projectile.tres" id="5_c1xxj"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_glpa6"]
size = Vector2(6, 13.5)

[sub_resource type="Gradient" id="Gradient_c1xxj"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0.6862745)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_k1ihl"]
gradient = SubResource("Gradient_c1xxj")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_k1ihl"]
particle_flag_disable_z = true
emission_shape_scale = Vector3(2.36, 2.635, 3.25)
emission_shape = 2
emission_sphere_radius = 0.71
velocity_pivot = Vector3(1, 1, 0)
spread = 13.846
initial_velocity_min = 50.0
initial_velocity_max = 80.0
scale_max = 2.0
scale_over_velocity_min = 352.15
scale_over_velocity_max = 352.15
color_ramp = SubResource("GradientTexture1D_k1ihl")

[sub_resource type="Gradient" id="Gradient_k1ihl"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0.5882353)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_eb1al"]
gradient = SubResource("Gradient_k1ihl")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_c1xxj"]
lifetime_randomness = 0.49
particle_flag_disable_z = true
emission_shape_offset = Vector3(0, 4.235, 0)
emission_shape = 1
emission_sphere_radius = 3.11
angle_min = -410.3
angle_max = 584.5
direction = Vector3(0, 1, 0)
spread = 10.0
initial_velocity_min = 50.0
initial_velocity_max = 50.0
gravity = Vector3(0, 0, 0)
linear_accel_min = 35.249996
linear_accel_max = 131.09999
scale_min = 2.0
scale_max = 2.0
color_ramp = SubResource("GradientTexture1D_eb1al")
turbulence_noise_scale = 0.0
turbulence_noise_speed_random = 4.0

[node name="PlayerShip" type="Node2D" groups=["Player"]]
texture_filter = 1
scale = Vector2(2, 2)
script = ExtResource("1_glpa6")

[node name="Ship" type="CharacterBody2D" parent="." groups=["Player"]]
z_index = 2
collision_mask = 0
motion_mode = 1
wall_min_slide_angle = 0.0

[node name="Ship_Collision" type="CollisionShape2D" parent="Ship"]
shape = SubResource("RectangleShape2D_glpa6")

[node name="Ship_Texture" type="Sprite2D" parent="Ship"]
texture_filter = 1
texture = ExtResource("1_qhiiv")

[node name="Health" parent="Ship" instance=ExtResource("3_4n1ev")]

[node name="Screen_Wrap" parent="Ship" instance=ExtResource("4_xcgsg")]

[node name="invincibility_frames" type="Timer" parent="Ship"]
wait_time = 2.0
one_shot = true

[node name="damaged_particles" type="GPUParticles2D" parent="Ship"]
z_index = 1
emitting = false
amount = 20
texture = ExtResource("5_c1xxj")
fixed_fps = 60
visibility_rect = Rect2(-250, -250, 500, 500)
trail_lifetime = 11.69
trail_sections = 20
trail_section_subdivisions = 10
process_material = SubResource("ParticleProcessMaterial_k1ihl")

[node name="ThrusterParticles" type="GPUParticles2D" parent="Ship"]
z_index = 1
amount = 150
lifetime = 2.0
randomness = 1.0
fixed_fps = 60
visibility_rect = Rect2(-1000, -1000, 2000, 2000)
process_material = SubResource("ParticleProcessMaterial_c1xxj")

[connection signal="is_damaged" from="Ship/Health" to="." method="_on_is_damaged"]
[connection signal="zero_health_reached" from="Ship/Health" to="." method="_on_health_zero_health_reached"]
[connection signal="timeout" from="Ship/invincibility_frames" to="." method="_on_invincibility_frames_timeout"]
